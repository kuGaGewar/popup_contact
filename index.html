<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup Contact Form using jQuery, Ajax, and PHP</title>

    <!-- Stylesheet file-->
    <link rel="stylesheet" href="css/style.css">

    <!-- jQuery Library-->
    <script src="js/jquery.min.js"> </script>
</head>

<body>
    <div class="container">
        <h2>Popup Contact Form with Email</h2>
        
        <!-- Trigger/Open The Modal -->
        <button id="mbtn" class="btn turned-button">Contact Us</button>
        
        <!-- The Modal -->
        <div id="modalDialog" class="modal">
            <div class="modal-content animate-top">
                <div class="modal-header">
                    <h1 class="modal-title">Get into Contact with us!</h1>
                    <!--
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                     </button>
                     -->
                    
                </div>
                <form method="post" id="contactFrm">
                <div class="modal-body">
                    <!-- Form submission status -->
                    <div class="response"></div>
                    
                    <!-- Contact form -->
                    <div class="form-personal">
                        <div class="form-group">
                            <input type="text" name="name" id="name" class="form-control" placeholder="Your Name*" required="">
                        </div>
                        <div class="form-group">
                            <input type="email" name="email" id="email" class="form-control" placeholder="Your E-Mail*" required="">
                        </div>
                        <div class="form-group">
                            <input type="phonenumber" name="phonenumber" id="phonenumber" class="form-control" placeholder="Phonenumber" required="">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <input type="company" name="company" id="company" class="form-control" placeholder="Company*" required="">
                    </div>
                    <div class="form-group">
                        <input type="subject" name="subject" id="subject" class="form-control" placeholder="Subject*" required="">
                    </div>
                    <div class="form-group">
                        <label>Antispam*</label>
                        <input type="antispam" name="antispam" id="antispam" class="form-control" placeholder="antispam*" required="">
                    </div>
                    <div class="form-group">
                        <textarea name="message" id="message" class="form-control" placeholder="Your message here" rows="6"></textarea>
                    </div>
                    
                </div>
                <div class="modal-footer">
                    <!-- Submit button -->
                    <button type="submit" class="btn btn-primary ">Send</button>
                </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <script>
        /*
         * Modal popup
         */
        // Get the modal
        var modal = $('#modalDialog');
        
        // Get the button that opens the modal
        var btn = $("#mbtn");
        
        // Get the  element that closes the modal
        var span = $(".close");
        
        $(document).ready(function(){
            // When the user clicks the button, open the modal 
            btn.on('click', function() {
                modal.show();
            });
            
            // When the user clicks on  (x), close the modal
            span.on('click', function() {
                modal.hide();
            });
        });
        
        
        //When the user clicks anywhere outside of the modal, close it
        //$('body').bind('click', function(e){
        //    if($(e.target).hasClass("modal")){
        //        modal.hide();
        //    }
        //});

        
        </script>

<script>
    $(document).ready(function(){
        $('#contactFrm').submit(function(e){
            e.preventDefault();
            $('.modal-body').css('opacity', '0.5');
            $('.btn').prop('disabled', true);
            
            $form = $(this);
            $.ajax({
                type: "POST",
                url: 'ajax_submit.php',
                data: 'contact_submit=1&'+$form.serialize(),
                dataType: 'json',
                success: function(response){
                    if(response.status == 1){
                        $('#contactFrm')[0].reset();
                        $('.response').html(''+response.message+'');
                    }else{
                        $('.response').html(''+response.message+'');
                    }
                    $('.modal-body').css('opacity', '');
                    $('.btn').prop('disabled', false);
                }
            });
        });
    });
    </script>
    
</body>
</html>